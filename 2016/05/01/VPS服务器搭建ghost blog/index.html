<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="VPS服务器搭建ghost blog"><meta name="keywords" content="ghost blog"><meta name="author" content="He Liu,undefined"><meta name="copyright" content="He Liu"><title>VPS服务器搭建ghost blog | HeLiu的博客</title><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css?version=1.5.2"><link rel="stylesheet" type="text/css" href="https://unpkg.com/gitalk/dist/gitalk.css"><script src="https://unpkg.com/gitalk@latest/dist/gitalk.min.js"></script><script src="https://unpkg.com/blueimp-md5@latest/js/md5.min.js"></script><script>var GLOBAL = { 
  root: '/',
  algolia: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  localSearch: {"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}"},"path":"search.xml"}
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/avatar.jpg"></div><div class="author-info__name text-center">He Liu</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">27</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">33</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">7</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://hexo-1252865648.cos.ap-chengdu.myqcloud.com/images/beautiful-cold-fog-547115%202.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">HeLiu的博客</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">主页</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/tags">标签</a><a class="site-page" href="/categories">分类</a><a class="site-page" href="/gallery">相册</a><a class="site-page" href="/slides">slides</a></span></div><div id="post-info"><div id="post-title">VPS服务器搭建ghost blog</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2016-05-01</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/web/">web</a><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">1,035</span><span class="post-meta__separator">|</span><span>阅读时长: 4 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div id="post-content"><p>####前传</p>
<hr>
<p>&#160;&#160;无意中看到markdown语法，立马就喜欢上它，所以就想博客能不能也用这种语法写，因为我的博客原来一直用wordpress来搞，第一个想到的当然是用插件，当然也下到了，不过估计是主题css的问题，代码框老显示不出来，对于想要代码框的我来说实在是不能忍，就上网搜有没有其他的博客工具，哈哈终于找到了它，ghostblog！</p>
<p>&#160;&#160;但是安装下来着实费了不少功夫。总结起来比较简便的方法还是AMH+Node.js<br><a id="more"></a><br>注：以下步骤引用自：<br><a href="http://www.tuicool.com/articles/jQnIJf3" target="_blank" rel="noopener">http://www.tuicool.com/articles/jQnIJf3</a></p>
<ol>
<li><p>安装AMH，网上有详细教程</p>
</li>
<li><p>安装Node.js</p>
<p>也是网上的教程，不过有些gcc版本可能支持不了太新的Node.js</p>
</li>
<li><p>安装ghost</p>
<ol>
<li><p>新建数据库</p>
<p>登陆AMH面板，进入数据库，快速建库，很简单。</p>
</li>
<li><p>新建站点</p>
<p>登陆AMH面板，点击虚拟主机，新建虚拟主机，这也很简单。</p>
</li>
<li><p>安装Ghost程序</p>
<p>这里我们使用的是 <a href="http://ghostchina.com/" target="_blank" rel="noopener">http://ghostchina.com/</a> 发布的中文版Ghost。</p>
<p>登陆ssh，运行命令，</p>
<pre><code>wget http://dl.ghostchina.com/Ghost-0.5.9-zh-full.zip //下载Ghost到VPS  
unzip Ghost-0.5.9-zh-full.zip -d ghost //解压Ghost-0.5.9-zh-full.zip并xiu修改文件夹名为ghost  
</code></pre><p>如没有安装unzip，请执行 sudo yum install unzip 来安装，</p>
<p>&#160;&#160;到这里需要注意，ghost文件夹里的所有文件全部移动到之前你新建虚拟主机的web根目录下，不然会出错，文件移动号后，进入虚拟主机的web根目录下</p>
<pre><code>cd /虚拟主机web根目录路径   //进入虚拟主机web根目录，此步骤不能少  
cp config.example.js config.js //复制config.example.js成config.js  
vim config.js //用vim编辑config.js文件  
</code></pre><p>将相关位置修改成以下这样：</p>
<pre><code>production: {  
url: &apos;http://your_blog_url&apos;,
mail: {},
database: {
client: &apos;mysql&apos;,
connection: {
host     : &apos;127.0.0.1&apos;, 
user     : &apos;root&apos;, //暂且直接用root账户
password : &apos;password&apos;, //你的root账户密码
database : &apos;ghost&apos;, //你之前建立的数据库名
charset  : &apos;utf8&apos;
},
debug: false
},
server: {
// Host to be passed to node&apos;s                 `net.Server#listen()`
host: &apos;127.0.0.1&apos;,//改为0.0.0.0，否则他人无法访问
// Port to be passed to node&apos;s `net.Server#listen()`, for iisnode set this to `process.env.PORT`
port: &apos;2368&apos;
}
},
</code></pre><p>这里说一下vim编辑器的一般用法：</p>
<p>i: 进入插入编辑模式</p>
<p>ESC: 退出编辑模式</p>
<p>:x : 退出并保存文件（退出编辑模式下使用）</p>
</li>
<li><p>配置Nginx</p>
<p>由于之前你新建的虚拟主机的Nginx配置是为php服务的，所以，我们要将其进行修改成为node.js服务，</p>
<pre><code>vim /usr/local/nginx/conf/***.conf //进入Nginx配置文件目录,并编辑与你新建的虚拟主机相应的Nginx配置文件  
</code></pre><p>清空里面的内容，替换成以下：</p>
<pre><code>server {  
listen 80;
server_name  xxx.com www.xxxx.com; //替换为你自己的域名！
location / {
proxy_set_header   X-Real-IP $remote_addr;
proxy_set_header   Host      $http_host;
proxy_pass         http://127.0.0.1:2368;
 }
}
</code></pre><p>然后进AMH控制面板重启一下Nginx，</p>
<pre><code>npm start --production //启动Ghost，如果不出差错，在浏览器输入你的域名就可以看见Ghost的界面了，--production不能少  
</code></pre><p>别以为到这就结束了，目前Ghost在我们SSH断开后就会结束进程，所以我们继续：</p>
</li>
<li><p>安装forever守护Ghost进程</p>
<p>为了让Ghost程序能够后台运行不中断，我们还得再安装个工具，就是forever，使用-g参数就是在全局模式中安装，这样我们就可以再任何地方都能使用forever命令了。</p>
<p>以下命令都请在网站根目录下运行</p>
<pre><code>npm install forever -g //forever的安装命令  
NODE_ENV=production forever start index.js  //安装forever后的Ghost启动命令  
</code></pre><p>   好了，Ghost就此安装完成</p>
</li>
</ol>
</li>
</ol>
<p>Ghost相关命令：</p>
<p>//以下命令都请在网站根目录下运行</p>
<pre><code>NODE_ENV=production forever start index.js //启动Ghost  
NODE_ENV=production forever stop index.js //停止Ghost  
NODE_ENV=production forever restart index.js //重启Ghost  
</code></pre><p>现在，你就可以通过AMH控制面板进行数据管理、在线的文件编辑和上传 同样，你也可以按正常步骤新建一个php网站。</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">He Liu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://heliu.io/2016/05/01/VPS服务器搭建ghost blog/">https://heliu.io/2016/05/01/VPS服务器搭建ghost blog/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://heliu.io" target="_blank">HeLiu的博客</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/ghost-blog/">ghost blog</a></div><div class="post-qr-code"><div class="post-qr-code-item"><img class="post-qr-code__img" src="https://hexo-1252865648.cos.ap-chengdu.myqcloud.com/qrcode/alipay.jpg"><div class="post-qr-code__desc">支付宝打赏</div></div><div class="post-qr-code-item"><img class="post-qr-code__img" src="https://hexo-1252865648.cos.ap-chengdu.myqcloud.com/qrcode/wechat.jpg"><div class="post-qr-code__desc">微信打赏</div></div></div><div class="social-share" data-disabled="facebook"></div><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script><nav id="pagination"><div class="prev-post pull-left"><a href="/2016/05/01/KeePass/"><i class="fa fa-chevron-left">  </i><span>KeePass+KeePassHTTP+chromeIPass储存个人密码</span></a></div></nav><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: 'ad7cd539b86faeab9c35',
  clientSecret: '4e6c00fca2d4e6e2c7c725936748e69ecb3a277c',
  repo: 'Gitalk',
  owner: 'heliuphy',
  admin: 'heliuphy',
  id: md5(decodeURI(location.pathname)),
  language: 'zh-CN'
})
gitalk.render('gitalk-container')</script></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2016 - 2018 By He Liu</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.5.2"></script><script src="/js/fancybox.js?version=1.5.2"></script><script src="/js/sidebar.js?version=1.5.2"></script><script src="/js/copy.js?version=1.5.2"></script><script src="/js/fireworks.js?version=1.5.2"></script><script src="/js/transition.js?version=1.5.2"></script><script src="/js/scroll.js?version=1.5.2"></script><script src="/js/head.js?version=1.5.2"></script></body></html>